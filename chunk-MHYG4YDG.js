import"./chunk-3XMDMJG6.js";import{a as f}from"./chunk-PJPYSWX2.js";import{C as _,D as U,E as P,F as T,G as I,H as R,I as E,J as N,K as W,L as $,M as G,N as X,O as Q,P as Y,Q as Z,R as J,T as K,a as y,b as S,c as z,d as j,e,f as O,g as d,h as p,i as b,j as B,k as L,l as q,m as l,n as c,o as k,p as D,q as F,r as x,s as r,t as u}from"./chunk-VNTX2RCN.js";import"./chunk-Y3DWMPTZ.js";import"./chunk-IV4XNXG4.js";import"./chunk-NSMQBKM2.js";import"./chunk-7VBOIHNM.js";import"./chunk-BXPB4ZAG.js";import"./chunk-CLDSZD2A.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-3QXY74KK.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{e as w}from"./chunk-JHI3MBHO.js";var H=f("ShareTarget",{web:()=>import("./chunk-OGG2LEG5.js").then(o=>new o.ShareTargetWeb)});var V,i1=function(){if(typeof window>"u")return new Map;if(!V){var o=window;o.Ionicons=o.Ionicons||{},V=o.Ionicons.map=o.Ionicons.map||new Map}return V},C=function(o){Object.keys(o).forEach(function(a){o1(a,o[a]);var s=a.replace(/([a-z0-9]|(?=[A-Z]))([A-Z0-9])/g,"$1-$2").toLowerCase();a!==s&&o1(s,o[a])})},o1=function(o,a){var s=i1(),t=s.get(o);t===void 0?s.set(o,a):t!==a&&console.warn('[Ionicons Warning]: Multiple icons were mapped to name "'.concat(o,'". Ensure that multiple icons are not mapped to the same icon name.'))};var a1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M336 192h40a40 40 0 0140 40v192a40 40 0 01-40 40H136a40 40 0 01-40-40V232a40 40 0 0140-40h40M336 128l-80-80-80 80M256 321V48' stroke-linecap='round' stroke-linejoin='round' class='ionicon-fill-none ionicon-stroke-width'/></svg>";function n1(o){o.CapacitorUtils.Synapse=new Proxy({},{get(a,s){return new Proxy({},{get(t,i){return(n,h,g)=>{let v=o.Capacitor.Plugins[s];if(v===void 0){g(new Error(`Capacitor plugin ${s} not found`));return}if(typeof v[i]!="function"){g(new Error(`Method ${i} not found in Capacitor plugin ${s}`));return}w(null,null,function*(){try{let m=yield v[i](n);h(m)}catch(m){g(m)}})}}})}})}function l1(o){o.CapacitorUtils.Synapse=new Proxy({},{get(a,s){return o.cordova.plugins[s]}})}function s1(o=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!o?n1(window):window.cordova!==void 0&&l1(window))}var t1=f("Filesystem",{web:()=>import("./chunk-HMBMZSAI.js").then(o=>new o.FilesystemWeb)});s1();var c1=(o,a)=>a.url;function e1(o,a){if(o&1&&(l(0,"section")(1,"h2",3),r(2,"\u{1F4CC} Title"),c(),l(3,"p",4),r(4),c()()),o&2){let s=x();e(4),u(s.title())}}function r1(o,a){if(o&1&&(l(0,"ion-item")(1,"ion-label"),r(2),c()()),o&2){let s=a.$implicit;e(2),u(s)}}function v1(o,a){if(o&1&&(l(0,"section")(1,"h2",3),r(2,"\u{1F4DD} Shared Texts"),c(),l(3,"ion-list"),B(4,r1,3,1,"ion-item",null,b),c()()),o&2){let s=x();e(4),L(s.texts())}}function g1(o,a){if(o&1&&k(0,"img",6),o&2){let s=x().$implicit;q("src",s.url,j)("alt",s.name)}}function w1(o,a){o&1&&k(0,"ion-icon",7)}function h1(o,a){if(o&1){let s=D();l(0,"ion-col",5)(1,"ion-card"),d(2,g1,1,2,"img",6)(3,w1,1,0,"ion-icon",7),l(4,"ion-card-header")(5,"ion-card-title"),r(6),c(),l(7,"ion-card-subtitle"),r(8),c()(),l(9,"ion-card-content")(10,"ion-button",8),F("click",function(){let i=y(s).$implicit,n=x(2);return S(n.openFile(i.url))}),r(11," View "),c()()()()}if(o&2){let s=a.$implicit;e(2),p(s.type.startsWith("image/")?2:3),e(4),u(s.name),e(2),u(s.type)}}function d1(o,a){if(o&1&&(l(0,"section")(1,"h2",3),r(2,"\u{1F4C2} Shared Files"),c(),l(3,"ion-grid")(4,"ion-row"),B(5,h1,12,3,"ion-col",5,c1),c()()()),o&2){let s=x();e(5),L(s.files())}}function p1(o,a){o&1&&(l(0,"div",2),k(1,"ion-icon",9),l(2,"p"),r(3,"No shared content yet. Share something to see it here!"),c()())}var _1=(()=>{let a=class a{constructor(){this.title=z(""),this.texts=z([]),this.files=z([]),this.shareListener=null,C({shareOutline:a1})}ngOnInit(){return w(this,null,function*(){yield this.listenForSharedContent()})}listenForSharedContent(){return w(this,null,function*(){this.shareListener=yield H.addListener("shareReceived",t=>w(this,null,function*(){console.log("Share received:",t),this.reset(),this.title.set(t.title||""),this.texts.set(t.texts||[]),this.handleSharedFiles(t)}))})}handleSharedFiles(t){return w(this,null,function*(){let i=[];if(t.files&&t.files.length>0)for(let n of t.files)try{let h;if(n.startsWith("content://")){h=yield t1.readFile({path:n});let g=atob(h.data),v=new Array(g.length);for(let M=0;M<g.length;M++)v[M]=g.charCodeAt(M);let m=new Uint8Array(v),A=new Blob([m],{type:"image/png"});i.push({name:this.extractFileName(n),type:A.type,url:URL.createObjectURL(A)})}else{let v=yield(yield fetch(n)).blob();i.push({name:this.extractFileName(n),type:v.type,url:URL.createObjectURL(v)})}this.files.set(i),console.log(this.texts,this.files,this.title)}catch(h){console.error("Error loading shared file:",h)}})}extractFileName(t){let i=t.split("/");return i[i.length-1]||"unknown-file"}openFile(t){window.open(t,"_blank")}reset(){this.files.set([])}ngOnDestroy(){return w(this,null,function*(){this.shareListener&&(yield this.shareListener.remove(),this.shareListener=null),yield H.removeAllListeners()})}};a.\u0275fac=function(i){return new(i||a)},a.\u0275cmp=O({type:a,selectors:[["app-home"]],decls:9,vars:4,consts:[["color","primary"],[1,"ion-padding"],[1,"empty-state"],[1,"section-title"],[1,"section-content"],["size","12","size-md","6","size-lg","4"],[1,"file-preview",3,"src","alt"],["name","document-outline",1,"file-icon"],["fill","solid","size","small","color","primary",3,"click"],["name","share-outline"]],template:function(i,n){i&1&&(l(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),r(3,"\u{1F4E4} Shared Content"),c()()(),l(4,"ion-content",1),d(5,e1,5,1,"section"),d(6,v1,6,0,"section"),d(7,d1,7,0,"section"),d(8,p1,4,0,"div",2),c()),i&2&&(e(5),p(n.title()?5:-1),e(),p(n.texts().length>0?6:-1),e(),p(n.files().length>0?7:-1),e(),p(!n.title()&&n.texts().length===0&&n.files().length===0?8:-1))},dependencies:[X,G,I,P,R,T,U,E,Y,W,K,Q,_,$,J,Z,N],styles:[".section-title[_ngcontent-%COMP%]{font-size:1.2rem;margin:12px 0 6px;font-weight:600;color:var(--ion-color-primary)}.section-content[_ngcontent-%COMP%]{font-size:1rem;color:var(--ion-color-medium);margin-bottom:16px}.file-preview[_ngcontent-%COMP%]{width:100%;max-height:180px;object-fit:cover;border-radius:10px}.file-icon[_ngcontent-%COMP%]{font-size:80px;color:var(--ion-color-medium);display:block;margin:16px auto}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:40px;text-align:center;color:var(--ion-color-medium)}.empty-state[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:60px;margin-bottom:12px}"]});let o=a;return o})();export{_1 as HomePage};
